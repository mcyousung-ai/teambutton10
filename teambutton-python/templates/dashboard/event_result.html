{% extends "base.html" %}
{% block title %}{{ event.title }} - ê²°ê³¼{% endblock %}
{% block content %}
<div class="container" style="padding:24px 16px 40px">
<h1 style="font-size:24px;font-weight:700;margin-bottom:24px">{{ event.title }} - ê²°ê³¼</h1>
<div class="tabs">
<div class="tab active" onclick="switchTab('ranking')">ê°œì¸ ë­í‚¹</div>
{% if teams %}<div class="tab" onclick="switchTab('team_ranking')">íŒ€ ë­í‚¹</div>{% endif %}
<div class="tab" onclick="switchTab('game_history')">ê²Œì„ íˆìŠ¤í† ë¦¬</div>
</div>
<div id="tab-ranking" class="tab-content active">
<div class="card">
<table><thead><tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>íŒ€</th><th>ì ìˆ˜</th></tr></thead>
<tbody>
{% for p in participants %}
<tr {% if loop.index <= 3 %}style="font-weight:700"{% endif %}>
<td>{% if loop.index == 1 %}ğŸ¥‡{% elif loop.index == 2 %}ğŸ¥ˆ{% elif loop.index == 3 %}ğŸ¥‰{% else %}{{ loop.index }}{% endif %}</td>
<td>{{ p.name }}</td><td>{{ p.team_name or '-' }}</td><td style="color:var(--primary-light)">{{ p.score }}</td>
</tr>
{% endfor %}
</tbody></table>
</div>
</div>
{% if teams %}
<div id="tab-team_ranking" class="tab-content">
<div class="card">
<table><thead><tr><th>ìˆœìœ„</th><th>íŒ€</th><th>ì ìˆ˜</th></tr></thead>
<tbody>
{% for t in teams %}
<tr {% if loop.index <= 3 %}style="font-weight:700"{% endif %}>
<td>{% if loop.index == 1 %}ğŸ¥‡{% elif loop.index == 2 %}ğŸ¥ˆ{% elif loop.index == 3 %}ğŸ¥‰{% else %}{{ loop.index }}{% endif %}</td>
<td>{{ t.name }}</td><td style="color:var(--primary-light)">{{ t.score }}</td>
</tr>
{% endfor %}
</tbody></table>
</div>
</div>
{% endif %}
<div id="tab-game_history" class="tab-content">
{% for gm in games %}
<div class="card">
<div class="flex justify-between items-center">
<strong>{{ gm.type }}</strong>
<span class="badge {% if gm.status == 'ì¢…ë£Œ' %}badge-danger{% else %}badge-gray{% endif %}">{{ gm.status }}</span>
</div>
<p class="text-sm text-muted mt-2">ì‘ë‹µ: {{ gm.responses|length }}ê°œ</p>
</div>
{% endfor %}
{% if not games %}<div class="empty"><p>ê²Œì„ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p></div>{% endif %}
</div>
</div>
<script>
function switchTab(n){document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.tab').forEach(e=>e.classList.remove('active'));document.getElementById('tab-'+n).classList.add('active');event.target.classList.add('active');}
</script>
{% endblock %}
